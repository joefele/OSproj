<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPU Scheduling Simulator</title>
    <link rel="stylesheet" href="proj.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>CPU Scheduling Simulator</h1>
            <p>Select a Scheduling Algorithm to Simulate</p>
        </div>

        <!-- Input Section -->
        <div class="card">
            <h2>Process Configuration</h2>

            <!-- Input Mode Selection -->
            <div class="form-group">
                <label>Input Mode:</label>
                <div class="radio-group">
                    <label>
                        <input type="radio" name="inputMode" value="manual" checked>
                        Manual Entry
                    </label>
                    <label>
                        <input type="radio" name="inputMode" value="random">
                        Random Generation
                    </label>
                </div>
            </div>

            <!-- Number of Processes -->
            <div class="form-group">
                <label for="numProcesses">Number of Processes:</label>
                <input type="number" id="numProcesses" value="3" min="1" max="10">
            </div>

            <!-- Algorithm Selection -->
            <div class="form-group">
                <label for="algorithmSelect">Select Scheduling Algorithm:</label>
                <select id="algorithmSelect" class="form-control">
                    <option value="fcfs">First Come First Serve (FCFS)</option>
                    <option value="sjf_np">SJF (Non-Preemptive)</option>
                    <option value="sjf_p">SJF (Preemptive)</option>
                    <option value="priority">Priority Scheduling</option>
                    <option value="rr">Round Robin (RR)</option>
                    <option value="mlfq">Multi-Level Feedback Queue (MLFQ)</option>
                </select>
            </div>

            <!-- Time Quantum Input (visible only for RR & MLFQ) -->
            <div class="form-group" id="timeQuantumGroup" style="display: none;">
                <label for="timeQuantum">Time Quantum (for RR or MLFQ):</label>
                <input type="number" id="timeQuantum" min="1" value="2">
            </div>

            <!-- Manual Input Section -->
            <div id="manualInput" class="form-group">
                <h3>Add Process Manually:</h3>
                <div class="input-row">
                    <div class="input-field">
                        <label>Process ID</label>
                        <input type="text" id="processId" placeholder="P0">
                    </div>
                    <div class="input-field">
                        <label>Arrival Time</label>
                        <input type="number" id="arrivalTime" min="0" placeholder="0">
                    </div>
                    <div class="input-field">
                        <label>Burst Time</label>
                        <input type="number" id="burstTime" min="1" placeholder="1">
                    </div>
                    <div class="input-field" id="priorityField" style="display: none;">
                        <label>Priority</label>
                        <input type="number" id="priority" min="0" placeholder="0">
                    </div>
                    <div class="input-field">
                        <button onclick="addProcess()" class="btn btn-primary">Add</button>
                    </div>
                </div>
            </div>

            <!-- Process List Display -->
            <div class="form-group">
                <h3>Current Processes:</h3>
                <div id="processList" class="process-list">
                    <div class="no-processes">No processes added yet</div>
                </div>
            </div>

            <!-- Control Buttons -->
            <div class="button-group">
                <button onclick="generateRandomProcesses()" class="btn btn-success">
                    Generate Random Processes
                </button>
                <button onclick="runSelectedAlgorithm()" class="btn btn-primary">
                    Run Selected Algorithm
                </button>
                <button onclick="clearAll()" class="btn btn-secondary">
                    Clear All
                </button>
            </div>
        </div>

        <!-- Results Section -->
        <div id="resultsSection" class="hidden">
            <!-- Gantt Chart -->
            <div class="card">
                <h2>Gantt Chart</h2>
                <div id="ganttChart" class="gantt-container">
                    <!-- Gantt chart will be displayed here -->
                </div>
            </div>

            <!-- Process Metrics -->
            <div class="card">
                <h2>Process Metrics</h2>
                <div id="metricsTable" class="table-container">
                    <!-- Metrics table will be displayed here -->
                </div>
                <div id="averageMetrics" class="average-metrics">
                    <!-- Average calculations will be displayed here -->
                </div>
            </div>
        </div>
    </div>

    <script src="proj.js"></script>
    <script>
        // Show/hide input fields based on selected algorithm
        document.getElementById("algorithmSelect").addEventListener("change", function () {
            const algorithm = this.value;
            document.getElementById("timeQuantumGroup").style.display =
                algorithm === "rr" || algorithm === "mlfq" ? "block" : "none";
            document.getElementById("priorityField").style.display =
                algorithm === "priority" ? "block" : "none";
        });

        // Run selected algorithm
        function runSelectedAlgorithm() {
            const algorithm = document.getElementById("algorithmSelect").value;

            switch (algorithm) {
                case "fcfs":
                    runFCFS();
                    break;
                case "sjf_np":
                    runSJFNonPreemptive();
                    break;
                case "sjf_p":
                    runSJFPreemptive();
                    break;
                case "priority":
                    runPriority();
                    break;
                case "rr":
                    const tqRR = parseInt(document.getElementById("timeQuantum").value, 10);
                    runRoundRobin(tqRR);
                    break;
                case "mlfq":
                    const tqMLFQ = parseInt(document.getElementById("timeQuantum").value, 10);
                    runMLFQ(tqMLFQ);
                    break;
                default:
                    alert("Invalid algorithm selected.");
            }
        }
    </script>
</body>
</html>
